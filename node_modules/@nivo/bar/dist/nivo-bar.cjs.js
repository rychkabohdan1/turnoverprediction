"use strict";var e=require("react"),a=require("@nivo/axes"),t=require("@nivo/core"),i=require("@react-spring/web"),n=require("@nivo/annotations"),r=require("react/jsx-runtime"),l=require("@nivo/legends"),o=require("@nivo/colors"),d=require("@nivo/theming"),u=require("@nivo/tooltip"),s=require("@nivo/text"),c=require("@nivo/scales"),h=require("d3-shape"),f=require("lodash/uniqBy.js"),b=require("@nivo/canvas");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(null,arguments)}function g(e,a){if(null==e)return{};var t={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==a.indexOf(i))continue;t[i]=e[i]}return t}var x,m=function(e){var a=e.bars,t=e.annotations,i=n.useAnnotations({data:a,annotations:t,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var a=e.height,t=e.width;return{width:t,height:a,size:Math.max(t,a)}}});return r.jsx(r.Fragment,{children:i.map((function(e,a){return r.jsx(n.Annotation,v({},e),a)}))})},p=function(e){var a=e.width,t=e.height,i=e.legends,n=e.toggleSerie;return r.jsx(r.Fragment,{children:i.map((function(e,i){var o,d=e[0],u=e[1];return r.jsx(l.BoxLegendSvg,v({},d,{containerWidth:a,containerHeight:t,data:null!=(o=d.data)?o:u,toggleSerie:d.toggleSerie&&"keys"===d.dataFrom?n:void 0}),i)}))})},y=["data"],k=function(a){var t,n=a.bar,l=n.data,o=g(n,y),c=a.style,h=c.borderColor,f=c.color,b=c.height,x=c.labelColor,m=c.labelOpacity,p=c.labelX,k=c.labelY,S=c.transform,C=c.width,w=c.textAnchor,L=a.borderRadius,V=a.borderWidth,M=a.label,W=a.shouldRenderLabel,R=a.isInteractive,T=a.onClick,B=a.onMouseEnter,O=a.onMouseLeave,I=a.tooltip,P=a.isFocusable,E=a.ariaLabel,H=a.ariaLabelledBy,j=a.ariaDescribedBy,A=a.ariaDisabled,F=a.ariaHidden,D=d.useTheme(),z=u.useTooltip(),X=z.showTooltipFromEvent,Y=z.showTooltipAt,q=z.hideTooltip,G=e.useMemo((function(){return function(){return e.createElement(I,v({},o,l))}}),[I,o,l]),N=e.useCallback((function(e){null==T||T(v({color:o.color},l),e)}),[o,l,T]),K=e.useCallback((function(e){return X(G(),e)}),[X,G]),_=e.useCallback((function(e){null==B||B(l,e),X(G(),e)}),[l,B,X,G]),J=e.useCallback((function(e){null==O||O(l,e),q()}),[l,q,O]),Q=e.useCallback((function(){Y(G(),[o.absX+o.width/2,o.absY])}),[Y,G,o]),U=e.useCallback((function(){q()}),[q]);return r.jsxs(i.animated.g,{transform:S,children:[r.jsx(i.animated.rect,{width:i.to(C,(function(e){return Math.max(e,0)})),height:i.to(b,(function(e){return Math.max(e,0)})),rx:L,ry:L,fill:null!=(t=l.fill)?t:f,strokeWidth:V,stroke:h,focusable:P,tabIndex:P?0:void 0,"aria-label":E?E(l):void 0,"aria-labelledby":H?H(l):void 0,"aria-describedby":j?j(l):void 0,"aria-disabled":A?A(l):void 0,"aria-hidden":F?F(l):void 0,onMouseEnter:R?_:void 0,onMouseMove:R?K:void 0,onMouseLeave:R?J:void 0,onClick:R?N:void 0,onFocus:R&&P?Q:void 0,onBlur:R&&P?U:void 0,"data-testid":"bar.item."+l.id+"."+l.index}),W&&r.jsx(s.Text,{x:p,y:k,textAnchor:w,dominantBaseline:"central",fillOpacity:m,style:v({},D.labels.text,{pointerEvents:"none",fill:x}),children:M})]})},S=["color","label"],C=function(e){var a=e.color,t=e.label,i=g(e,S);return r.jsx(u.BasicTooltip,{id:t,value:i.formattedValue,enableChip:!0,color:a})},w={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisTop:null,axisRight:null,axisBottom:a.defaultAxisProps,axisLeft:a.defaultAxisProps,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:C,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},L=v({},w,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:k,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),V=v({},w,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(x=window.devicePixelRatio)?x:1}),M=function(e,a,t,i,n,r){return c.computeScale(i,{all:e.map(a),min:0,max:0},n,r).padding(t)},W=function(e,a){return e.map((function(e){return v({},a.reduce((function(e,a){return e[a]=null,e}),{}),e)}))},R=function(e){return Object.keys(e).reduce((function(a,t){return e[t]&&(a[t]=e[t]),a}),{})},T=function(e){return[e,Number(e)]};function B(e,a,t,i){return void 0===e&&(e=w.layout),void 0===a&&(a=w.reverse),void 0===t&&(t=w.labelPosition),void 0===i&&(i=w.labelOffset),function(n,r){var l=i*(a?-1:1);if("horizontal"===e){var o=n/2;return"start"===t?o=a?n:0:"end"===t&&(o=a?0:n),{labelX:o+l,labelY:r/2,textAnchor:"middle"===t?"middle":a?"end":"start"}}var d=r/2;return"start"===t?d=a?0:r:"end"===t&&(d=a?r:0),{labelX:n/2,labelY:d-l,textAnchor:"middle"}}}var O=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],I=function(e,a){return e>a},P=function(e,a){return e<a},E=function(e,a){return Array.from(" ".repeat(a-e),(function(a,t){return e+t}))},H=function(e){return I(e,0)?0:e},j=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,f=e.yScale,b=e.margin,v=t?P:I,g=n.map(R),x=[];return c.forEach((function(e,t){return E(0,h.domain().length).forEach((function(u){var c,m,p,y=T(n[u][e]),k=y[0],S=y[1],C=o(n[u]),w=(null!=(c=h(C))?c:0)+a*t+s*t,L=v(m=S,0)?null!=(p=f(m))?p:0:i,V=function(e,a){var t;return v(e,0)?i-a:(null!=(t=f(e))?t:0)-i}(S,L),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};x.push({key:e+"."+M.indexValue,index:x.length,data:M,x:w,y:L,absX:b.left+w,absY:b.top+L,width:a,height:V,color:l(M),label:d(M)})}))})),x},A=function(e,a,t,i){var n=e.data,r=e.formatValue,l=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,f=e.yScale,b=e.margin,v=t?P:I,g=n.map(R),x=[];return u.forEach((function(e,t){return E(0,f.domain().length).forEach((function(u){var s,m,p,y=T(n[u][e]),k=y[0],S=y[1],C=l(n[u]),w=v(m=S,0)?i:null!=(p=h(m))?p:0,L=(null!=(s=f(C))?s:0)+a*t+c*t,V=function(e,a){var t;return v(e,0)?(null!=(t=h(e))?t:0)-i:i-a}(S,w),M={id:e,value:null===k?k:S,formattedValue:r(S),hidden:!1,index:u,indexValue:C,data:g[u]};x.push({key:e+"."+M.indexValue,index:x.length,data:M,x:w,y:L,absX:b.left+w,absY:b.top+L,width:V,height:a,color:o(M),label:d(M)})}))})),x},F=function(e){var a,t,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,h=e.innerPadding,f=void 0===h?0:h,b=e.valueScale,x=e.indexScale,m=e.hiddenIds,p=void 0===m?[]:m,y=g(e,O),k=y.keys.filter((function(e){return!p.includes(e)})),S=W(y.data,k),C="vertical"===i?["y","x",o]:["x","y",d],w=C[0],L=C[1],V=C[2],R=M(S,y.getIndex,s,x,V,L),T=v({max:r,min:n,reverse:l},b),B="auto"===T.min?H:function(e){return e},I=S.reduce((function(e,a){return[].concat(e,k.map((function(e){return a[e]})))}),[]).filter(Boolean),P=B(Math.min.apply(Math,I)),E=(t=Math.max.apply(Math,I),isFinite(t)?t:0),F=c.computeScale(T,{all:I,min:P,max:E},"x"===w?o:d,w),D="vertical"===i?[R,F]:[F,R],z=D[0],X=D[1],Y=(R.bandwidth()-f*(k.length-1))/k.length,q=[v({},y,{data:S,keys:k,innerPadding:f,xScale:z,yScale:X}),Y,T.reverse,null!=(a=F(0))?a:0];return{xScale:z,yScale:X,bars:Y>0?"vertical"===i?j.apply(void 0,q):A.apply(void 0,q):[]}},D=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],z=function(e){var a;return e.some(Array.isArray)?z((a=[]).concat.apply(a,e)):e},X=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var b,v,g=e[f],x=null!=(b=u(r(g.data)))?b:0,m=(null!=(v=function(e){return s(e[t?0:1])}(g))?v:0)+.5*o,p=function(e,a){var i;return(null!=(i=s(e[t?1:0]))?i:0)-a}(g,m)-o,y=T(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:f,indexValue:d,data:R(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:x,y:m,absX:c.left+x,absY:c.top+m,width:a,height:p,color:n(C),label:l(C)})}))})),h},Y=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,l=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,f){var b,v,g=e[f],x=null!=(b=s(r(g.data)))?b:0,m=(null!=(v=function(e){return u(e[t?1:0])}(g))?v:0)+.5*o,p=function(e,a){var i;return(null!=(i=u(e[t?0:1]))?i:0)-a}(g,m)-o,y=T(g.data[e.key]),k=y[0],S=y[1],C={id:e.key,value:null===k?k:S,formattedValue:i(S),hidden:!1,index:f,indexValue:d,data:R(g.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:m,y:x,absX:c.left+m,absY:c.top+x,width:p,height:a,color:n(C),label:l(C)})}))})),h},q=function(e){var a,t=e.data,i=e.layout,n=e.minValue,r=e.maxValue,l=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,f=e.valueScale,b=e.indexScale,x=e.hiddenIds,m=void 0===x?[]:x,p=g(e,D),y=p.keys.filter((function(e){return!m.includes(e)})),k=h.stack().keys(y).offset(h.stackOffsetDiverging)(W(t,y)),S="vertical"===i?["y","x",o]:["x","y",d],C=S[0],w=S[1],L=S[2],V=M(t,p.getIndex,s,b,L,w),R=v({max:r,min:n,reverse:l},f),T=(a=z(k),"log"===f.type?a.filter((function(e){return 0!==e})):a),B=Math.min.apply(Math,T),O=Math.max.apply(Math,T),I=c.computeScale(R,{all:T,min:B,max:O},"x"===C?o:d,C),P="vertical"===i?[V,I]:[I,V],E=P[0],H=P[1],j=p.innerPadding>0?p.innerPadding:0,A=V.bandwidth(),F=[v({},p,{innerPadding:j,stackedData:k,xScale:E,yScale:H}),A,R.reverse];return{xScale:E,yScale:H,bars:A>0?"vertical"===i?X.apply(void 0,F):Y.apply(void 0,F):[]}},G=function(e){var a=e.bars,i=e.direction,n=e.from,r=e.groupMode,l=e.layout,o=e.legendLabel,d=e.reverse,u=t.getPropertyAccessor(null!=o?o:"indexes"===n?"indexValue":"id");return"indexes"===n?function(e,a,t){var i=f(e.map((function(e){var a,i;return{id:null!=(a=e.data.indexValue)?a:"",label:t(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===a&&i.reverse(),i}(a,l,u):function(e,a,t,i,n,r){var l=f(e.map((function(e){var a;return{id:e.data.id,label:r(e.data),hidden:e.data.hidden,color:null!=(a=e.color)?a:"#000"}})),(function(e){return e.id}));return("vertical"===a&&"stacked"===i&&"column"===t&&!0!==n||"horizontal"===a&&"stacked"===i&&!0===n)&&l.reverse(),l}(a,l,i,r,d,u)},N=function(e,a,t){var i=e.get(a)||0;e.set(a,i+t)},K=function(e,a,t){var i=e.get(a)||0;e.set(a,i+(t>0?t:0))},_=function(e,a,t){var i=e.get(a)||0;e.set(a,Math.max(i,Number(t)))},J=function(e,a){var t=e.get(a)||0;e.set(a,t+1)},Q=function(a){var i=a.indexBy,n=void 0===i?w.indexBy:i,r=a.keys,l=void 0===r?w.keys:r,u=a.label,s=void 0===u?w.label:u,c=a.tooltipLabel,h=void 0===c?w.tooltipLabel:c,f=a.valueFormat,b=a.colors,g=void 0===b?w.colors:b,x=a.colorBy,m=void 0===x?w.colorBy:x,p=a.borderColor,y=void 0===p?w.borderColor:p,k=a.labelTextColor,S=void 0===k?w.labelTextColor:k,C=a.groupMode,L=void 0===C?w.groupMode:C,V=a.layout,M=void 0===V?w.layout:V,W=a.reverse,R=void 0===W?w.reverse:W,T=a.data,B=a.minValue,O=void 0===B?w.minValue:B,I=a.maxValue,P=void 0===I?w.maxValue:I,E=a.margin,H=a.width,j=a.height,A=a.padding,D=void 0===A?w.padding:A,z=a.innerPadding,X=void 0===z?w.innerPadding:z,Y=a.valueScale,Q=void 0===Y?w.valueScale:Y,U=a.indexScale,Z=void 0===U?w.indexScale:U,$=a.initialHiddenIds,ee=void 0===$?w.initialHiddenIds:$,ae=a.enableLabel,te=void 0===ae?w.enableLabel:ae,ie=a.labelSkipWidth,ne=void 0===ie?w.labelSkipWidth:ie,re=a.labelSkipHeight,le=void 0===re?w.labelSkipHeight:re,oe=a.legends,de=void 0===oe?w.legends:oe,ue=a.legendLabel,se=a.totalsOffset,ce=void 0===se?w.totalsOffset:se,he=e.useState(null!=ee?ee:[]),fe=he[0],be=he[1],ve=e.useCallback((function(e){be((function(a){return a.indexOf(e)>-1?a.filter((function(a){return a!==e})):[].concat(a,[e])}))}),[]),ge=t.usePropertyAccessor(n),xe=t.usePropertyAccessor(s),me=t.usePropertyAccessor(h),pe=t.useValueFormatter(f),ye=d.useTheme(),ke=o.useOrdinalColorScale(g,m),Se=o.useInheritedColor(y,ye),Ce=o.useInheritedColor(S,ye),we=("grouped"===L?F:q)({layout:M,reverse:R,data:T,getIndex:ge,keys:l,minValue:O,maxValue:P,width:H,height:j,getColor:ke,padding:D,innerPadding:X,valueScale:Q,indexScale:Z,hiddenIds:fe,formatValue:pe,getTooltipLabel:me,margin:E}),Le=we.bars,Ve=we.xScale,Me=we.yScale,We=e.useMemo((function(){return Le.filter((function(e){return null!==e.data.value})).map((function(e,a){return v({},e,{index:a})}))}),[Le]),Re=e.useCallback((function(e){var a=e.width,t=e.height;return!!te&&(!(ne>0&&a<ne)&&!(le>0&&t<le))}),[te,ne,le]),Te=e.useMemo((function(){return l.map((function(e){var a=Le.find((function(a){return a.data.id===e}));return v({},a,{data:v({id:e},null==a?void 0:a.data,{hidden:fe.includes(e)})})}))}),[fe,l,Le]),Be=e.useMemo((function(){return de.map((function(e){return[e,G({bars:"keys"===e.dataFrom?Te:Le,direction:e.direction,from:e.dataFrom,groupMode:L,layout:M,legendLabel:ue,reverse:R})]}))}),[de,Te,Le,L,M,ue,R]),Oe=e.useMemo((function(){return function(e,a,t,i,n,r,l){void 0===i&&(i=w.layout),void 0===n&&(n=w.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,s=e[0].height;if("stacked"===n){var c=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;N(d,t,Number(i)),K(c,t,Number(i))})),c.forEach((function(e,n){var c,h,f,b=d.get(n)||0;"vertical"===i?(c=a(n),h=t(e),f=t(e/2)):(c=a(e),h=t(n),f=a(e/2)),c+="vertical"===i?u/2:r,h+="vertical"===i?-r:s/2,o.push({key:"total_"+n,x:c,y:h,value:b,formattedValue:l(b),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var a=e.data,t=a.indexValue,i=a.value;N(d,t,Number(i)),_(h,t,Number(i)),J(f,t)})),h.forEach((function(e,n){var c,h,b,v=d.get(n)||0,g=f.get(n);"vertical"===i?(c=a(n),h=t(e),b=t(e/2)):(c=a(e),h=t(n),b=a(e/2)),c+="vertical"===i?g*u/2:r,h+="vertical"===i?-r:g*s/2,o.push({key:"total_"+n,x:c,y:h,value:v,formattedValue:l(v),animationOffset:b})}))}return o}(Le,Ve,Me,M,L,ce,pe)}),[Le,Ve,Me,M,L,ce,pe]);return{bars:Le,barsWithValue:We,xScale:Ve,yScale:Me,getIndex:ge,getLabel:xe,getTooltipLabel:me,formatValue:pe,getColor:ke,getBorderColor:Se,getLabelColor:Ce,shouldRenderBarLabel:Re,hiddenIds:fe,toggleSerie:ve,legendsWithData:Be,barTotals:Oe}},U=function(e){var a=e.data,t=e.springConfig,n=e.animate,l=e.layout,o=void 0===l?L.layout:l,u=d.useTheme();return i.useTransition(a,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===o?e.x:e.animationOffset,y:"vertical"===o?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===o?e.x:e.animationOffset,y:"vertical"===o?e.animationOffset:e.y,labelOpacity:0}},config:t,immediate:!n,initial:n?void 0:null})((function(e,a){return r.jsx(i.animated.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:v({},u.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:u.labels.text.fontSize,fontFamily:u.labels.text.fontFamily,textAnchor:"vertical"===o?"middle":"start",alignmentBaseline:"vertical"===o?"alphabetic":"middle",children:a.formattedValue},a.key)}))},Z=["isInteractive","animate","motionConfig","theme","renderWrapper"],$=function(n){var l=n.data,o=n.indexBy,d=n.keys,u=n.margin,s=n.width,c=n.height,h=n.groupMode,f=n.layout,b=n.reverse,g=n.minValue,x=n.maxValue,y=n.valueScale,k=n.indexScale,S=n.padding,C=n.innerPadding,w=n.axisTop,V=n.axisRight,M=n.axisBottom,W=void 0===M?L.axisBottom:M,R=n.axisLeft,T=void 0===R?L.axisLeft:R,O=n.enableGridX,I=void 0===O?L.enableGridX:O,P=n.enableGridY,E=void 0===P?L.enableGridY:P,H=n.gridXValues,j=n.gridYValues,A=n.layers,F=void 0===A?L.layers:A,D=n.barComponent,z=void 0===D?L.barComponent:D,X=n.enableLabel,Y=void 0===X?L.enableLabel:X,q=n.label,G=n.labelSkipWidth,N=void 0===G?L.labelSkipWidth:G,K=n.labelSkipHeight,_=void 0===K?L.labelSkipHeight:K,J=n.labelTextColor,Z=n.labelPosition,$=void 0===Z?L.labelPosition:Z,ee=n.labelOffset,ae=void 0===ee?L.labelOffset:ee,te=n.markers,ie=void 0===te?L.markers:te,ne=n.colorBy,re=n.colors,le=n.defs,oe=void 0===le?L.defs:le,de=n.fill,ue=void 0===de?L.fill:de,se=n.borderRadius,ce=void 0===se?L.borderRadius:se,he=n.borderWidth,fe=void 0===he?L.borderWidth:he,be=n.borderColor,ve=n.annotations,ge=void 0===ve?L.annotations:ve,xe=n.legendLabel,me=n.tooltipLabel,pe=n.valueFormat,ye=n.isInteractive,ke=void 0===ye?L.isInteractive:ye,Se=n.tooltip,Ce=void 0===Se?L.tooltip:Se,we=n.onClick,Le=n.onMouseEnter,Ve=n.onMouseLeave,Me=n.legends,We=n.role,Re=void 0===We?L.role:We,Te=n.ariaLabel,Be=n.ariaLabelledBy,Oe=n.ariaDescribedBy,Ie=n.isFocusable,Pe=void 0===Ie?L.isFocusable:Ie,Ee=n.barAriaLabel,He=n.barAriaLabelledBy,je=n.barAriaDescribedBy,Ae=n.barAriaHidden,Fe=n.barAriaDisabled,De=n.initialHiddenIds,ze=n.enableTotals,Xe=void 0===ze?L.enableTotals:ze,Ye=n.totalsOffset,qe=void 0===Ye?L.totalsOffset:Ye,Ge=n.forwardedRef,Ne=t.useMotionConfig(),Ke=Ne.animate,_e=Ne.config,Je=t.useDimensions(s,c,u),Qe=Je.outerWidth,Ue=Je.outerHeight,Ze=Je.margin,$e=Je.innerWidth,ea=Je.innerHeight,aa=Q({indexBy:o,label:q,tooltipLabel:me,valueFormat:pe,colors:re,colorBy:ne,borderColor:be,labelTextColor:J,groupMode:h,layout:f,reverse:b,data:l,keys:d,minValue:g,maxValue:x,margin:Ze,width:$e,height:ea,padding:S,innerPadding:C,valueScale:y,indexScale:k,enableLabel:Y,labelSkipWidth:N,labelSkipHeight:_,legends:Me,legendLabel:xe,initialHiddenIds:De,totalsOffset:qe}),ta=aa.bars,ia=aa.barsWithValue,na=aa.xScale,ra=aa.yScale,la=aa.getLabel,oa=aa.getTooltipLabel,da=aa.getBorderColor,ua=aa.getLabelColor,sa=aa.shouldRenderBarLabel,ca=aa.toggleSerie,ha=aa.legendsWithData,fa=aa.barTotals,ba=aa.getColor,va=B(f,b,$,ae),ga=i.useTransition(ia,{keys:function(e){return e.key},from:function(e){return v({borderColor:da(e),color:e.color,height:0,labelColor:ua(e),labelOpacity:0},va(e.width,e.height),{transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===f?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return v({borderColor:da(e),color:e.color,height:e.height,labelColor:ua(e),labelOpacity:1},va(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},update:function(e){return v({borderColor:da(e),color:e.color,height:e.height,labelColor:ua(e),labelOpacity:1},va(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},leave:function(e){return v({borderColor:da(e),color:e.color,height:0,labelColor:ua(e),labelOpacity:0},va(e.width,e.height),{labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===f?{}:v({},va(e.width,e.height),{labelX:0,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0}))},config:_e,immediate:!Ke,initial:Ke?void 0:null}),xa=e.useMemo((function(){return{borderRadius:ce,borderWidth:fe,enableLabel:Y,isInteractive:ke,labelSkipWidth:N,labelSkipHeight:_,onClick:we,onMouseEnter:Le,onMouseLeave:Ve,getTooltipLabel:oa,tooltip:Ce,isFocusable:Pe,ariaLabel:Ee,ariaLabelledBy:He,ariaDescribedBy:je,ariaHidden:Ae,ariaDisabled:Fe}}),[ce,fe,Y,oa,ke,_,N,we,Le,Ve,Ce,Pe,Ee,He,je,Ae,Fe]),ma=t.bindDefs(oe,ta,ue,{dataKey:"data",targetKey:"data.fill"}),pa={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};F.includes("annotations")&&(pa.annotations=r.jsx(m,{bars:ta,annotations:ge},"annotations")),F.includes("axes")&&(pa.axes=r.jsx(a.Axes,{xScale:na,yScale:ra,width:$e,height:ea,top:w,right:V,bottom:W,left:T},"axes")),F.includes("bars")&&(pa.bars=r.jsx(e.Fragment,{children:ga((function(a,t){return e.createElement(z,v({},xa,{bar:t,style:a,shouldRenderLabel:sa(t),label:la(t.data)}))}))},"bars")),F.includes("grid")&&(pa.grid=r.jsx(a.Grid,{width:$e,height:ea,xScale:I?na:null,yScale:E?ra:null,xValues:H,yValues:j},"grid")),F.includes("legends")&&(pa.legends=r.jsx(p,{width:$e,height:ea,legends:ha,toggleSerie:ca},"legends")),F.includes("markers")&&(pa.markers=r.jsx(t.CartesianMarkers,{markers:ie,width:$e,height:ea,xScale:na,yScale:ra},"markers")),F.includes("totals")&&Xe&&(pa.totals=r.jsx(U,{data:fa,springConfig:_e,animate:Ke,layout:f},"totals"));var ya=e.useMemo((function(){return v({},xa,{margin:Ze,width:s,height:c,innerWidth:$e,innerHeight:ea,bars:ta,legendData:ha,enableLabel:Y,xScale:na,yScale:ra,tooltip:Ce,getTooltipLabel:oa,onClick:we,onMouseEnter:Le,onMouseLeave:Ve,getColor:ba})}),[xa,Ze,s,c,$e,ea,ta,ha,Y,na,ra,Ce,oa,we,Le,Ve,ba]);return r.jsx(t.SvgWrapper,{width:Qe,height:Ue,margin:Ze,defs:ma,role:Re,ariaLabel:Te,ariaLabelledBy:Be,ariaDescribedBy:Oe,isFocusable:Pe,ref:Ge,children:F.map((function(a,t){var i;return"function"==typeof a?r.jsx(e.Fragment,{children:e.createElement(a,ya)},t):null!=(i=null==pa?void 0:pa[a])?i:null}))})},ee=e.forwardRef((function(e,a){var i=e.isInteractive,n=void 0===i?L.isInteractive:i,l=e.animate,o=void 0===l?L.animate:l,d=e.motionConfig,u=void 0===d?L.motionConfig:d,s=e.theme,c=e.renderWrapper,h=g(e,Z);return r.jsx(t.Container,{animate:o,isInteractive:n,motionConfig:u,renderWrapper:c,theme:s,children:r.jsx($,v({isInteractive:n},h,{forwardedRef:a}))})})),ae=["isInteractive","renderWrapper","theme"],te=function(e,a,i,n){return e.find((function(e){return t.isCursorInRect(e.x+a.left,e.y+a.top,e.width,e.height,i,n)}))};var ie=function(i){var o=i.data,c=i.indexBy,h=i.keys,f=i.margin,g=i.width,x=i.height,m=i.groupMode,p=i.layout,y=i.reverse,k=i.minValue,S=i.maxValue,C=i.valueScale,w=i.indexScale,L=i.padding,M=i.innerPadding,W=i.axisTop,R=i.axisRight,T=i.axisBottom,O=void 0===T?V.axisBottom:T,I=i.axisLeft,P=void 0===I?V.axisLeft:I,E=i.enableGridX,H=void 0===E?V.enableGridX:E,j=i.enableGridY,A=void 0===j?V.enableGridY:j,F=i.gridXValues,D=i.gridYValues,z=i.labelPosition,X=void 0===z?V.labelPosition:z,Y=i.labelOffset,q=void 0===Y?V.labelOffset:Y,G=i.layers,N=void 0===G?V.layers:G,K=i.renderBar,_=void 0===K?function(e,a){var t=a.bar,i=t.color,n=t.height,r=t.width,l=t.x,o=t.y,d=a.borderColor,u=a.borderRadius,c=a.borderWidth,h=a.label,f=a.shouldRenderLabel,v=a.labelStyle,g=a.labelX,x=a.labelY,m=a.textAnchor;e.fillStyle=i,c>0&&(e.strokeStyle=d,e.lineWidth=c),e.beginPath(),b.roundedRect(e,l,o,r,n,Math.min(u,n)),e.fill(),c>0&&e.stroke(),f&&(e.textBaseline="middle",e.textAlign="middle"===m?"center":m,s.drawCanvasText(e,v,h,l+g,o+x))}:K,J=i.enableLabel,U=void 0===J?V.enableLabel:J,Z=i.label,$=i.labelSkipWidth,ee=void 0===$?V.labelSkipWidth:$,ae=i.labelSkipHeight,ie=void 0===ae?V.labelSkipHeight:ae,ne=i.labelTextColor,re=i.colorBy,le=i.colors,oe=i.borderRadius,de=void 0===oe?V.borderRadius:oe,ue=i.borderWidth,se=void 0===ue?V.borderWidth:ue,ce=i.borderColor,he=i.annotations,fe=void 0===he?V.annotations:he,be=i.legendLabel,ve=i.tooltipLabel,ge=i.valueFormat,xe=i.isInteractive,me=void 0===xe?V.isInteractive:xe,pe=i.tooltip,ye=void 0===pe?V.tooltip:pe,ke=i.onClick,Se=i.onMouseEnter,Ce=i.onMouseLeave,we=i.legends,Le=i.pixelRatio,Ve=void 0===Le?V.pixelRatio:Le,Me=i.role,We=i.forwardedRef,Re=i.enableTotals,Te=void 0===Re?V.enableTotals:Re,Be=i.totalsOffset,Oe=void 0===Be?V.totalsOffset:Be,Ie=e.useRef(null),Pe=d.useTheme(),Ee=t.useDimensions(g,x,f),He=Ee.margin,je=Ee.innerWidth,Ae=Ee.innerHeight,Fe=Ee.outerWidth,De=Ee.outerHeight,ze=Q({indexBy:c,label:Z,tooltipLabel:ve,valueFormat:ge,colors:le,colorBy:re,borderColor:ce,labelTextColor:ne,groupMode:m,layout:p,reverse:y,data:o,keys:h,minValue:k,maxValue:S,margin:He,width:je,height:Ae,padding:L,innerPadding:M,valueScale:C,indexScale:w,enableLabel:U,labelSkipWidth:ee,labelSkipHeight:ie,legends:we,legendLabel:be,totalsOffset:Oe}),Xe=ze.bars,Ye=ze.barsWithValue,qe=ze.xScale,Ge=ze.yScale,Ne=ze.getLabel,Ke=ze.getTooltipLabel,_e=ze.getBorderColor,Je=ze.getLabelColor,Qe=ze.shouldRenderBarLabel,Ue=ze.legendsWithData,Ze=ze.barTotals,$e=ze.getColor,ea=u.useTooltip(),aa=ea.showTooltipFromEvent,ta=ea.hideTooltip,ia=n.useComputedAnnotations({annotations:n.useAnnotations({data:Xe,annotations:fe,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var a=e.width,t=e.height;return{width:a,height:t,size:Math.max(a,t)}}})}),na=e.useMemo((function(){return{borderRadius:de,borderWidth:se,isInteractive:me,isFocusable:!1,labelSkipWidth:ee,labelSkipHeight:ie,margin:He,width:g,height:x,innerWidth:je,innerHeight:Ae,bars:Xe,legendData:Ue,enableLabel:U,xScale:qe,yScale:Ge,tooltip:ye,getTooltipLabel:Ke,onClick:ke,onMouseEnter:Se,onMouseLeave:Ce,getColor:$e}}),[de,se,me,ee,ie,He,g,x,je,Ae,Xe,Ue,U,qe,Ge,ye,Ke,ke,Se,Ce,$e]),ra=t.useValueFormatter(ge),la=B(p,y,X,q);e.useEffect((function(){var e,t=null==(e=Ie.current)?void 0:e.getContext("2d");Ie.current&&t&&(Ie.current.width=Fe*Ve,Ie.current.height=De*Ve,t.scale(Ve,Ve),t.fillStyle=Pe.background,t.fillRect(0,0,Fe,De),t.translate(He.left,He.top),N.forEach((function(e){"grid"===e?"number"==typeof Pe.grid.line.strokeWidth&&Pe.grid.line.strokeWidth>0&&(t.lineWidth=Pe.grid.line.strokeWidth,t.strokeStyle=Pe.grid.line.stroke,H&&a.renderGridLinesToCanvas(t,{width:je,height:Ae,scale:qe,axis:"x",values:F}),A&&a.renderGridLinesToCanvas(t,{width:je,height:Ae,scale:Ge,axis:"y",values:D})):"axes"===e?a.renderAxesToCanvas(t,{xScale:qe,yScale:Ge,width:je,height:Ae,top:W,right:R,bottom:O,left:P,theme:Pe}):"bars"===e?(s.setCanvasFont(t,Pe.text),Ye.forEach((function(e){_(t,v({bar:e,borderColor:_e(e),borderRadius:de,borderWidth:se,label:Ne(e.data),shouldRenderLabel:Qe(e),labelStyle:v({},Pe.labels.text,{fill:Je(e)})},la(e.width,e.height)))}))):"legends"===e?Ue.forEach((function(e){var a=e[0],i=e[1];l.renderLegendToCanvas(t,v({},a,{data:i,containerWidth:je,containerHeight:Ae,theme:Pe}))})):"annotations"===e?n.renderAnnotationsToCanvas(t,{annotations:ia,theme:Pe}):"totals"===e&&Te?function(e,a,t,i){void 0===i&&(i=V.layout),s.setCanvasFont(e,t.labels.text),e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",a.forEach((function(a){s.drawCanvasText(e,t.labels.text,a.formattedValue,a.x,a.y)}))}(t,Ze,Pe,p):"function"==typeof e&&e(t,na)})),t.save())}),[O,P,R,W,Ye,de,se,ia,H,A,_e,Ne,Je,F,D,m,x,Ae,je,na,N,p,Ue,He.left,He.top,De,Fe,Ve,_,qe,Ge,y,Qe,Pe,g,Ze,Te,ra,la]);var oa=e.useCallback((function(a){if(Xe&&Ie.current){var i=t.getRelativeCursor(Ie.current,a),n=i[0],r=i[1],l=te(Xe,He,n,r);void 0!==l?(aa(e.createElement(ye,v({},l.data,{color:l.color,label:l.label,value:Number(l.data.value)})),a),"mouseenter"===a.type&&(null==Se||Se(l.data,a))):ta()}}),[ta,He,Se,Xe,aa,ye]),da=e.useCallback((function(e){if(Xe&&Ie.current){ta();var a=t.getRelativeCursor(Ie.current,e),i=a[0],n=a[1],r=te(Xe,He,i,n);r&&(null==Ce||Ce(r.data,e))}}),[ta,He,Ce,Xe]),ua=e.useCallback((function(e){if(Xe&&Ie.current){var a=t.getRelativeCursor(Ie.current,e),i=a[0],n=a[1],r=te(Xe,He,i,n);void 0!==r&&(null==ke||ke(v({},r.data,{color:r.color}),e))}}),[He,ke,Xe]);return r.jsx("canvas",{ref:t.mergeRefs(Ie,We),width:Fe*Ve,height:De*Ve,style:{width:Fe,height:De,cursor:me?"auto":"normal"},onMouseEnter:me?oa:void 0,onMouseMove:me?oa:void 0,onMouseLeave:me?da:void 0,onClick:me?ua:void 0,role:Me})},ne=e.forwardRef((function(e,a){var i=e.isInteractive,n=e.renderWrapper,l=e.theme,o=g(e,ae);return r.jsx(t.Container,{isInteractive:i,renderWrapper:n,theme:l,animate:!1,children:r.jsx(ie,v({},o,{forwardedRef:a}))})})),re=["defaultWidth","defaultHeight","onResize","debounceResize"],le=e.forwardRef((function(e,a){var i=e.defaultWidth,n=e.defaultHeight,l=e.onResize,o=e.debounceResize,d=g(e,re);return r.jsx(t.ResponsiveWrapper,{defaultWidth:i,defaultHeight:n,onResize:l,debounceResize:o,children:function(e){var t=e.width,i=e.height;return r.jsx(ee,v({width:t,height:i},d,{ref:a}))}})})),oe=["defaultWidth","defaultHeight","onResize","debounceResize"],de=e.forwardRef((function(e,a){var i=e.defaultWidth,n=e.defaultHeight,l=e.onResize,o=e.debounceResize,d=g(e,oe);return r.jsx(t.ResponsiveWrapper,{defaultWidth:i,defaultHeight:n,onResize:l,debounceResize:o,children:function(e){var t=e.width,i=e.height;return r.jsx(ne,v({width:t,height:i},d,{ref:a}))}})}));exports.Bar=ee,exports.BarCanvas=ne,exports.BarItem=k,exports.BarTooltip=C,exports.BarTotals=U,exports.ResponsiveBar=le,exports.ResponsiveBarCanvas=de,exports.canvasDefaultProps=V,exports.defaultProps=w,exports.svgDefaultProps=L;
//# sourceMappingURL=nivo-bar.cjs.js.map
