import{useMemo as e,createElement as t,useCallback as a,useState as i,forwardRef as n,Fragment as l,useRef as r,useEffect as o}from"react";import{defaultAxisProps as d,Axes as u,Grid as s,renderGridLinesToCanvas as c,renderAxesToCanvas as h}from"@nivo/axes";import{getPropertyAccessor as f,usePropertyAccessor as b,useValueFormatter as v,Container as g,useMotionConfig as m,useDimensions as p,bindDefs as x,CartesianMarkers as y,SvgWrapper as S,getRelativeCursor as k,mergeRefs as w,isCursorInRect as L,ResponsiveWrapper as C}from"@nivo/core";import{animated as V,to as W,useTransition as M}from"@react-spring/web";import{useAnnotations as B,Annotation as R,useComputedAnnotations as O,renderAnnotationsToCanvas as I}from"@nivo/annotations";import{jsx as T,Fragment as H,jsxs as P}from"react/jsx-runtime";import{BoxLegendSvg as E,renderLegendToCanvas as F}from"@nivo/legends";import{useOrdinalColorScale as z,useInheritedColor as D}from"@nivo/colors";import{useTheme as A}from"@nivo/theming";import{useTooltip as X,BasicTooltip as Y}from"@nivo/tooltip";import{Text as G,setCanvasFont as N,drawCanvasText as j}from"@nivo/text";import{computeScale as K}from"@nivo/scales";import{stack as _,stackOffsetDiverging as q}from"d3-shape";import J from"lodash/uniqBy.js";import{roundedRect as Q}from"@nivo/canvas";function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},U.apply(null,arguments)}function Z(e,t){if(null==e)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;a[i]=e[i]}return a}var $,ee=function(e){var t=e.bars,a=e.annotations,i=B({data:t,annotations:a,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var t=e.height,a=e.width;return{width:a,height:t,size:Math.max(a,t)}}});return T(H,{children:i.map((function(e,t){return T(R,U({},e),t)}))})},te=function(e){var t=e.width,a=e.height,i=e.legends,n=e.toggleSerie;return T(H,{children:i.map((function(e,i){var l,r=e[0],o=e[1];return T(E,U({},r,{containerWidth:t,containerHeight:a,data:null!=(l=r.data)?l:o,toggleSerie:r.toggleSerie&&"keys"===r.dataFrom?n:void 0}),i)}))})},ae=["data"],ie=function(i){var n,l=i.bar,r=l.data,o=Z(l,ae),d=i.style,u=d.borderColor,s=d.color,c=d.height,h=d.labelColor,f=d.labelOpacity,b=d.labelX,v=d.labelY,g=d.transform,m=d.width,p=d.textAnchor,x=i.borderRadius,y=i.borderWidth,S=i.label,k=i.shouldRenderLabel,w=i.isInteractive,L=i.onClick,C=i.onMouseEnter,M=i.onMouseLeave,B=i.tooltip,R=i.isFocusable,O=i.ariaLabel,I=i.ariaLabelledBy,H=i.ariaDescribedBy,E=i.ariaDisabled,F=i.ariaHidden,z=A(),D=X(),Y=D.showTooltipFromEvent,N=D.showTooltipAt,j=D.hideTooltip,K=e((function(){return function(){return t(B,U({},o,r))}}),[B,o,r]),_=a((function(e){null==L||L(U({color:o.color},r),e)}),[o,r,L]),q=a((function(e){return Y(K(),e)}),[Y,K]),J=a((function(e){null==C||C(r,e),Y(K(),e)}),[r,C,Y,K]),Q=a((function(e){null==M||M(r,e),j()}),[r,j,M]),$=a((function(){N(K(),[o.absX+o.width/2,o.absY])}),[N,K,o]),ee=a((function(){j()}),[j]);return P(V.g,{transform:g,children:[T(V.rect,{width:W(m,(function(e){return Math.max(e,0)})),height:W(c,(function(e){return Math.max(e,0)})),rx:x,ry:x,fill:null!=(n=r.fill)?n:s,strokeWidth:y,stroke:u,focusable:R,tabIndex:R?0:void 0,"aria-label":O?O(r):void 0,"aria-labelledby":I?I(r):void 0,"aria-describedby":H?H(r):void 0,"aria-disabled":E?E(r):void 0,"aria-hidden":F?F(r):void 0,onMouseEnter:w?J:void 0,onMouseMove:w?q:void 0,onMouseLeave:w?Q:void 0,onClick:w?_:void 0,onFocus:w&&R?$:void 0,onBlur:w&&R?ee:void 0,"data-testid":"bar.item."+r.id+"."+r.index}),k&&T(G,{x:b,y:v,textAnchor:p,dominantBaseline:"central",fillOpacity:f,style:U({},z.labels.text,{pointerEvents:"none",fill:h}),children:S})]})},ne=["color","label"],le=function(e){var t=e.color,a=e.label,i=Z(e,ne);return T(Y,{id:a,value:i.formattedValue,enableChip:!0,color:t})},re={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisTop:null,axisRight:null,axisBottom:d,axisLeft:d,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:le,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},oe=U({},re,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:ie,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),de=U({},re,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=($=window.devicePixelRatio)?$:1}),ue=function(e,t,a,i,n,l){return K(i,{all:e.map(t),min:0,max:0},n,l).padding(a)},se=function(e,t){return e.map((function(e){return U({},t.reduce((function(e,t){return e[t]=null,e}),{}),e)}))},ce=function(e){return Object.keys(e).reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),{})},he=function(e){return[e,Number(e)]};function fe(e,t,a,i){return void 0===e&&(e=re.layout),void 0===t&&(t=re.reverse),void 0===a&&(a=re.labelPosition),void 0===i&&(i=re.labelOffset),function(n,l){var r=i*(t?-1:1);if("horizontal"===e){var o=n/2;return"start"===a?o=t?n:0:"end"===a&&(o=t?0:n),{labelX:o+r,labelY:l/2,textAnchor:"middle"===a?"middle":t?"end":"start"}}var d=l/2;return"start"===a?d=t?0:l:"end"===a&&(d=t?l:0),{labelX:n/2,labelY:d-r,textAnchor:"middle"}}}var be=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],ve=function(e,t){return e>t},ge=function(e,t){return e<t},me=function(e,t){return Array.from(" ".repeat(t-e),(function(t,a){return e+a}))},pe=function(e){return ve(e,0)?0:e},xe=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,f=e.yScale,b=e.margin,v=a?ge:ve,g=n.map(ce),m=[];return c.forEach((function(e,a){return me(0,h.domain().length).forEach((function(u){var c,p,x,y=he(n[u][e]),S=y[0],k=y[1],w=o(n[u]),L=(null!=(c=h(w))?c:0)+t*a+s*a,C=v(p=k,0)?null!=(x=f(p))?x:0:i,V=function(e,t){var a;return v(e,0)?i-t:(null!=(a=f(e))?a:0)-i}(k,C),W={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+W.indexValue,index:m.length,data:W,x:L,y:C,absX:b.left+L,absY:b.top+C,width:t,height:V,color:r(W),label:d(W)})}))})),m},ye=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,f=e.yScale,b=e.margin,v=a?ge:ve,g=n.map(ce),m=[];return u.forEach((function(e,a){return me(0,f.domain().length).forEach((function(u){var s,p,x,y=he(n[u][e]),S=y[0],k=y[1],w=r(n[u]),L=v(p=k,0)?i:null!=(x=h(p))?x:0,C=(null!=(s=f(w))?s:0)+t*a+c*a,V=function(e,t){var a;return v(e,0)?(null!=(a=h(e))?a:0)-i:i-t}(k,L),W={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+W.indexValue,index:m.length,data:W,x:L,y:C,absX:b.left+L,absY:b.top+C,width:V,height:t,color:o(W),label:d(W)})}))})),m},Se=function(e){var t,a,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,c=e.innerPadding,h=void 0===c?0:c,f=e.valueScale,b=e.indexScale,v=e.hiddenIds,g=void 0===v?[]:v,m=Z(e,be),p=m.keys.filter((function(e){return!g.includes(e)})),x=se(m.data,p),y="vertical"===i?["y","x",o]:["x","y",d],S=y[0],k=y[1],w=y[2],L=ue(x,m.getIndex,s,b,w,k),C=U({max:l,min:n,reverse:r},f),V="auto"===C.min?pe:function(e){return e},W=x.reduce((function(e,t){return[].concat(e,p.map((function(e){return t[e]})))}),[]).filter(Boolean),M=V(Math.min.apply(Math,W)),B=(a=Math.max.apply(Math,W),isFinite(a)?a:0),R=K(C,{all:W,min:M,max:B},"x"===S?o:d,S),O="vertical"===i?[L,R]:[R,L],I=O[0],T=O[1],H=(L.bandwidth()-h*(p.length-1))/p.length,P=[U({},m,{data:x,keys:p,innerPadding:h,xScale:I,yScale:T}),H,C.reverse,null!=(t=R(0))?t:0];return{xScale:I,yScale:T,bars:H>0?"vertical"===i?xe.apply(void 0,P):ye.apply(void 0,P):[]}},ke=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],we=function(e){var t;return e.some(Array.isArray)?we((t=[]).concat.apply(t,e)):e},Le=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=u(l(g.data)))?b:0,p=(null!=(v=function(e){return s(e[a?0:1])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=s(e[a?1:0]))?i:0)-t}(g,p)-o,y=he(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:ce(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:m,y:p,absX:c.left+m,absY:c.top+p,width:t,height:x,color:n(w),label:r(w)})}))})),h},Ce=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=s(l(g.data)))?b:0,p=(null!=(v=function(e){return u(e[a?1:0])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=u(e[a?0:1]))?i:0)-t}(g,p)-o,y=he(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:ce(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:p,y:m,absX:c.left+p,absY:c.top+m,width:x,height:t,color:n(w),label:r(w)})}))})),h},Ve=function(e){var t,a=e.data,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,s=void 0===u?0:u,c=e.valueScale,h=e.indexScale,f=e.hiddenIds,b=void 0===f?[]:f,v=Z(e,ke),g=v.keys.filter((function(e){return!b.includes(e)})),m=_().keys(g).offset(q)(se(a,g)),p="vertical"===i?["y","x",o]:["x","y",d],x=p[0],y=p[1],S=p[2],k=ue(a,v.getIndex,s,h,S,y),w=U({max:l,min:n,reverse:r},c),L=(t=we(m),"log"===c.type?t.filter((function(e){return 0!==e})):t),C=Math.min.apply(Math,L),V=Math.max.apply(Math,L),W=K(w,{all:L,min:C,max:V},"x"===x?o:d,x),M="vertical"===i?[k,W]:[W,k],B=M[0],R=M[1],O=v.innerPadding>0?v.innerPadding:0,I=k.bandwidth(),T=[U({},v,{innerPadding:O,stackedData:m,xScale:B,yScale:R}),I,w.reverse];return{xScale:B,yScale:R,bars:I>0?"vertical"===i?Le.apply(void 0,T):Ce.apply(void 0,T):[]}},We=function(e){var t=e.bars,a=e.direction,i=e.from,n=e.groupMode,l=e.layout,r=e.legendLabel,o=e.reverse,d=f(null!=r?r:"indexes"===i?"indexValue":"id");return"indexes"===i?function(e,t,a){var i=J(e.map((function(e){var t,i;return{id:null!=(t=e.data.indexValue)?t:"",label:a(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===t&&i.reverse(),i}(t,l,d):function(e,t,a,i,n,l){var r=J(e.map((function(e){var t;return{id:e.data.id,label:l(e.data),hidden:e.data.hidden,color:null!=(t=e.color)?t:"#000"}})),(function(e){return e.id}));return("vertical"===t&&"stacked"===i&&"column"===a&&!0!==n||"horizontal"===t&&"stacked"===i&&!0===n)&&r.reverse(),r}(t,l,a,n,o,d)},Me=function(e,t,a){var i=e.get(t)||0;e.set(t,i+a)},Be=function(e,t,a){var i=e.get(t)||0;e.set(t,i+(a>0?a:0))},Re=function(e,t,a){var i=e.get(t)||0;e.set(t,Math.max(i,Number(a)))},Oe=function(e,t){var a=e.get(t)||0;e.set(t,a+1)},Ie=function(t){var n=t.indexBy,l=void 0===n?re.indexBy:n,r=t.keys,o=void 0===r?re.keys:r,d=t.label,u=void 0===d?re.label:d,s=t.tooltipLabel,c=void 0===s?re.tooltipLabel:s,h=t.valueFormat,f=t.colors,g=void 0===f?re.colors:f,m=t.colorBy,p=void 0===m?re.colorBy:m,x=t.borderColor,y=void 0===x?re.borderColor:x,S=t.labelTextColor,k=void 0===S?re.labelTextColor:S,w=t.groupMode,L=void 0===w?re.groupMode:w,C=t.layout,V=void 0===C?re.layout:C,W=t.reverse,M=void 0===W?re.reverse:W,B=t.data,R=t.minValue,O=void 0===R?re.minValue:R,I=t.maxValue,T=void 0===I?re.maxValue:I,H=t.margin,P=t.width,E=t.height,F=t.padding,X=void 0===F?re.padding:F,Y=t.innerPadding,G=void 0===Y?re.innerPadding:Y,N=t.valueScale,j=void 0===N?re.valueScale:N,K=t.indexScale,_=void 0===K?re.indexScale:K,q=t.initialHiddenIds,J=void 0===q?re.initialHiddenIds:q,Q=t.enableLabel,Z=void 0===Q?re.enableLabel:Q,$=t.labelSkipWidth,ee=void 0===$?re.labelSkipWidth:$,te=t.labelSkipHeight,ae=void 0===te?re.labelSkipHeight:te,ie=t.legends,ne=void 0===ie?re.legends:ie,le=t.legendLabel,oe=t.totalsOffset,de=void 0===oe?re.totalsOffset:oe,ue=i(null!=J?J:[]),se=ue[0],ce=ue[1],he=a((function(e){ce((function(t){return t.indexOf(e)>-1?t.filter((function(t){return t!==e})):[].concat(t,[e])}))}),[]),fe=b(l),be=b(u),ve=b(c),ge=v(h),me=A(),pe=z(g,p),xe=D(y,me),ye=D(k,me),ke=("grouped"===L?Se:Ve)({layout:V,reverse:M,data:B,getIndex:fe,keys:o,minValue:O,maxValue:T,width:P,height:E,getColor:pe,padding:X,innerPadding:G,valueScale:j,indexScale:_,hiddenIds:se,formatValue:ge,getTooltipLabel:ve,margin:H}),we=ke.bars,Le=ke.xScale,Ce=ke.yScale,Ie=e((function(){return we.filter((function(e){return null!==e.data.value})).map((function(e,t){return U({},e,{index:t})}))}),[we]),Te=a((function(e){var t=e.width,a=e.height;return!!Z&&(!(ee>0&&t<ee)&&!(ae>0&&a<ae))}),[Z,ee,ae]),He=e((function(){return o.map((function(e){var t=we.find((function(t){return t.data.id===e}));return U({},t,{data:U({id:e},null==t?void 0:t.data,{hidden:se.includes(e)})})}))}),[se,o,we]),Pe=e((function(){return ne.map((function(e){return[e,We({bars:"keys"===e.dataFrom?He:we,direction:e.direction,from:e.dataFrom,groupMode:L,layout:V,legendLabel:le,reverse:M})]}))}),[ne,He,we,L,V,le,M]),Ee=e((function(){return function(e,t,a,i,n,l,r){void 0===i&&(i=re.layout),void 0===n&&(n=re.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,s=e[0].height;if("stacked"===n){var c=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Me(d,a,Number(i)),Be(c,a,Number(i))})),c.forEach((function(e,n){var c,h,f,b=d.get(n)||0;"vertical"===i?(c=t(n),h=a(e),f=a(e/2)):(c=t(e),h=a(n),f=t(e/2)),c+="vertical"===i?u/2:l,h+="vertical"===i?-l:s/2,o.push({key:"total_"+n,x:c,y:h,value:b,formattedValue:r(b),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;Me(d,a,Number(i)),Re(h,a,Number(i)),Oe(f,a)})),h.forEach((function(e,n){var c,h,b,v=d.get(n)||0,g=f.get(n);"vertical"===i?(c=t(n),h=a(e),b=a(e/2)):(c=t(e),h=a(n),b=t(e/2)),c+="vertical"===i?g*u/2:l,h+="vertical"===i?-l:g*s/2,o.push({key:"total_"+n,x:c,y:h,value:v,formattedValue:r(v),animationOffset:b})}))}return o}(we,Le,Ce,V,L,de,ge)}),[we,Le,Ce,V,L,de,ge]);return{bars:we,barsWithValue:Ie,xScale:Le,yScale:Ce,getIndex:fe,getLabel:be,getTooltipLabel:ve,formatValue:ge,getColor:pe,getBorderColor:xe,getLabelColor:ye,shouldRenderBarLabel:Te,hiddenIds:se,toggleSerie:he,legendsWithData:Pe,barTotals:Ee}},Te=function(e){var t=e.data,a=e.springConfig,i=e.animate,n=e.layout,l=void 0===n?oe.layout:n,r=A();return M(t,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===l?e.x:e.animationOffset,y:"vertical"===l?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===l?e.x:e.animationOffset,y:"vertical"===l?e.animationOffset:e.y,labelOpacity:0}},config:a,immediate:!i,initial:i?void 0:null})((function(e,t){return T(V.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:U({},r.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:r.labels.text.fontSize,fontFamily:r.labels.text.fontFamily,textAnchor:"vertical"===l?"middle":"start",alignmentBaseline:"vertical"===l?"alphabetic":"middle",children:t.formattedValue},t.key)}))},He=["isInteractive","animate","motionConfig","theme","renderWrapper"],Pe=function(a){var i=a.data,n=a.indexBy,r=a.keys,o=a.margin,d=a.width,c=a.height,h=a.groupMode,f=a.layout,b=a.reverse,v=a.minValue,g=a.maxValue,k=a.valueScale,w=a.indexScale,L=a.padding,C=a.innerPadding,V=a.axisTop,W=a.axisRight,B=a.axisBottom,R=void 0===B?oe.axisBottom:B,O=a.axisLeft,I=void 0===O?oe.axisLeft:O,H=a.enableGridX,P=void 0===H?oe.enableGridX:H,E=a.enableGridY,F=void 0===E?oe.enableGridY:E,z=a.gridXValues,D=a.gridYValues,A=a.layers,X=void 0===A?oe.layers:A,Y=a.barComponent,G=void 0===Y?oe.barComponent:Y,N=a.enableLabel,j=void 0===N?oe.enableLabel:N,K=a.label,_=a.labelSkipWidth,q=void 0===_?oe.labelSkipWidth:_,J=a.labelSkipHeight,Q=void 0===J?oe.labelSkipHeight:J,Z=a.labelTextColor,$=a.labelPosition,ae=void 0===$?oe.labelPosition:$,ie=a.labelOffset,ne=void 0===ie?oe.labelOffset:ie,le=a.markers,re=void 0===le?oe.markers:le,de=a.colorBy,ue=a.colors,se=a.defs,ce=void 0===se?oe.defs:se,he=a.fill,be=void 0===he?oe.fill:he,ve=a.borderRadius,ge=void 0===ve?oe.borderRadius:ve,me=a.borderWidth,pe=void 0===me?oe.borderWidth:me,xe=a.borderColor,ye=a.annotations,Se=void 0===ye?oe.annotations:ye,ke=a.legendLabel,we=a.tooltipLabel,Le=a.valueFormat,Ce=a.isInteractive,Ve=void 0===Ce?oe.isInteractive:Ce,We=a.tooltip,Me=void 0===We?oe.tooltip:We,Be=a.onClick,Re=a.onMouseEnter,Oe=a.onMouseLeave,He=a.legends,Pe=a.role,Ee=void 0===Pe?oe.role:Pe,Fe=a.ariaLabel,ze=a.ariaLabelledBy,De=a.ariaDescribedBy,Ae=a.isFocusable,Xe=void 0===Ae?oe.isFocusable:Ae,Ye=a.barAriaLabel,Ge=a.barAriaLabelledBy,Ne=a.barAriaDescribedBy,je=a.barAriaHidden,Ke=a.barAriaDisabled,_e=a.initialHiddenIds,qe=a.enableTotals,Je=void 0===qe?oe.enableTotals:qe,Qe=a.totalsOffset,Ue=void 0===Qe?oe.totalsOffset:Qe,Ze=a.forwardedRef,$e=m(),et=$e.animate,tt=$e.config,at=p(d,c,o),it=at.outerWidth,nt=at.outerHeight,lt=at.margin,rt=at.innerWidth,ot=at.innerHeight,dt=Ie({indexBy:n,label:K,tooltipLabel:we,valueFormat:Le,colors:ue,colorBy:de,borderColor:xe,labelTextColor:Z,groupMode:h,layout:f,reverse:b,data:i,keys:r,minValue:v,maxValue:g,margin:lt,width:rt,height:ot,padding:L,innerPadding:C,valueScale:k,indexScale:w,enableLabel:j,labelSkipWidth:q,labelSkipHeight:Q,legends:He,legendLabel:ke,initialHiddenIds:_e,totalsOffset:Ue}),ut=dt.bars,st=dt.barsWithValue,ct=dt.xScale,ht=dt.yScale,ft=dt.getLabel,bt=dt.getTooltipLabel,vt=dt.getBorderColor,gt=dt.getLabelColor,mt=dt.shouldRenderBarLabel,pt=dt.toggleSerie,xt=dt.legendsWithData,yt=dt.barTotals,St=dt.getColor,kt=fe(f,b,ae,ne),wt=M(st,{keys:function(e){return e.key},from:function(e){return U({borderColor:vt(e),color:e.color,height:0,labelColor:gt(e),labelOpacity:0},kt(e.width,e.height),{transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===f?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return U({borderColor:vt(e),color:e.color,height:e.height,labelColor:gt(e),labelOpacity:1},kt(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},update:function(e){return U({borderColor:vt(e),color:e.color,height:e.height,labelColor:gt(e),labelOpacity:1},kt(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},leave:function(e){return U({borderColor:vt(e),color:e.color,height:0,labelColor:gt(e),labelOpacity:0},kt(e.width,e.height),{labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===f?{}:U({},kt(e.width,e.height),{labelX:0,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0}))},config:tt,immediate:!et,initial:et?void 0:null}),Lt=e((function(){return{borderRadius:ge,borderWidth:pe,enableLabel:j,isInteractive:Ve,labelSkipWidth:q,labelSkipHeight:Q,onClick:Be,onMouseEnter:Re,onMouseLeave:Oe,getTooltipLabel:bt,tooltip:Me,isFocusable:Xe,ariaLabel:Ye,ariaLabelledBy:Ge,ariaDescribedBy:Ne,ariaHidden:je,ariaDisabled:Ke}}),[ge,pe,j,bt,Ve,Q,q,Be,Re,Oe,Me,Xe,Ye,Ge,Ne,je,Ke]),Ct=x(ce,ut,be,{dataKey:"data",targetKey:"data.fill"}),Vt={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};X.includes("annotations")&&(Vt.annotations=T(ee,{bars:ut,annotations:Se},"annotations")),X.includes("axes")&&(Vt.axes=T(u,{xScale:ct,yScale:ht,width:rt,height:ot,top:V,right:W,bottom:R,left:I},"axes")),X.includes("bars")&&(Vt.bars=T(l,{children:wt((function(e,a){return t(G,U({},Lt,{bar:a,style:e,shouldRenderLabel:mt(a),label:ft(a.data)}))}))},"bars")),X.includes("grid")&&(Vt.grid=T(s,{width:rt,height:ot,xScale:P?ct:null,yScale:F?ht:null,xValues:z,yValues:D},"grid")),X.includes("legends")&&(Vt.legends=T(te,{width:rt,height:ot,legends:xt,toggleSerie:pt},"legends")),X.includes("markers")&&(Vt.markers=T(y,{markers:re,width:rt,height:ot,xScale:ct,yScale:ht},"markers")),X.includes("totals")&&Je&&(Vt.totals=T(Te,{data:yt,springConfig:tt,animate:et,layout:f},"totals"));var Wt=e((function(){return U({},Lt,{margin:lt,width:d,height:c,innerWidth:rt,innerHeight:ot,bars:ut,legendData:xt,enableLabel:j,xScale:ct,yScale:ht,tooltip:Me,getTooltipLabel:bt,onClick:Be,onMouseEnter:Re,onMouseLeave:Oe,getColor:St})}),[Lt,lt,d,c,rt,ot,ut,xt,j,ct,ht,Me,bt,Be,Re,Oe,St]);return T(S,{width:it,height:nt,margin:lt,defs:Ct,role:Ee,ariaLabel:Fe,ariaLabelledBy:ze,ariaDescribedBy:De,isFocusable:Xe,ref:Ze,children:X.map((function(e,a){var i;return"function"==typeof e?T(l,{children:t(e,Wt)},a):null!=(i=null==Vt?void 0:Vt[e])?i:null}))})},Ee=n((function(e,t){var a=e.isInteractive,i=void 0===a?oe.isInteractive:a,n=e.animate,l=void 0===n?oe.animate:n,r=e.motionConfig,o=void 0===r?oe.motionConfig:r,d=e.theme,u=e.renderWrapper,s=Z(e,He);return T(g,{animate:l,isInteractive:i,motionConfig:o,renderWrapper:u,theme:d,children:T(Pe,U({isInteractive:i},s,{forwardedRef:t}))})})),Fe=["isInteractive","renderWrapper","theme"],ze=function(e,t,a,i){return e.find((function(e){return L(e.x+t.left,e.y+t.top,e.width,e.height,a,i)}))};var De=function(i){var n=i.data,l=i.indexBy,d=i.keys,u=i.margin,s=i.width,f=i.height,b=i.groupMode,g=i.layout,m=i.reverse,x=i.minValue,y=i.maxValue,S=i.valueScale,L=i.indexScale,C=i.padding,V=i.innerPadding,W=i.axisTop,M=i.axisRight,R=i.axisBottom,H=void 0===R?de.axisBottom:R,P=i.axisLeft,E=void 0===P?de.axisLeft:P,z=i.enableGridX,D=void 0===z?de.enableGridX:z,Y=i.enableGridY,G=void 0===Y?de.enableGridY:Y,K=i.gridXValues,_=i.gridYValues,q=i.labelPosition,J=void 0===q?de.labelPosition:q,Z=i.labelOffset,$=void 0===Z?de.labelOffset:Z,ee=i.layers,te=void 0===ee?de.layers:ee,ae=i.renderBar,ie=void 0===ae?function(e,t){var a=t.bar,i=a.color,n=a.height,l=a.width,r=a.x,o=a.y,d=t.borderColor,u=t.borderRadius,s=t.borderWidth,c=t.label,h=t.shouldRenderLabel,f=t.labelStyle,b=t.labelX,v=t.labelY,g=t.textAnchor;e.fillStyle=i,s>0&&(e.strokeStyle=d,e.lineWidth=s),e.beginPath(),Q(e,r,o,l,n,Math.min(u,n)),e.fill(),s>0&&e.stroke(),h&&(e.textBaseline="middle",e.textAlign="middle"===g?"center":g,j(e,f,c,r+b,o+v))}:ae,ne=i.enableLabel,le=void 0===ne?de.enableLabel:ne,re=i.label,oe=i.labelSkipWidth,ue=void 0===oe?de.labelSkipWidth:oe,se=i.labelSkipHeight,ce=void 0===se?de.labelSkipHeight:se,he=i.labelTextColor,be=i.colorBy,ve=i.colors,ge=i.borderRadius,me=void 0===ge?de.borderRadius:ge,pe=i.borderWidth,xe=void 0===pe?de.borderWidth:pe,ye=i.borderColor,Se=i.annotations,ke=void 0===Se?de.annotations:Se,we=i.legendLabel,Le=i.tooltipLabel,Ce=i.valueFormat,Ve=i.isInteractive,We=void 0===Ve?de.isInteractive:Ve,Me=i.tooltip,Be=void 0===Me?de.tooltip:Me,Re=i.onClick,Oe=i.onMouseEnter,Te=i.onMouseLeave,He=i.legends,Pe=i.pixelRatio,Ee=void 0===Pe?de.pixelRatio:Pe,Fe=i.role,De=i.forwardedRef,Ae=i.enableTotals,Xe=void 0===Ae?de.enableTotals:Ae,Ye=i.totalsOffset,Ge=void 0===Ye?de.totalsOffset:Ye,Ne=r(null),je=A(),Ke=p(s,f,u),_e=Ke.margin,qe=Ke.innerWidth,Je=Ke.innerHeight,Qe=Ke.outerWidth,Ue=Ke.outerHeight,Ze=Ie({indexBy:l,label:re,tooltipLabel:Le,valueFormat:Ce,colors:ve,colorBy:be,borderColor:ye,labelTextColor:he,groupMode:b,layout:g,reverse:m,data:n,keys:d,minValue:x,maxValue:y,margin:_e,width:qe,height:Je,padding:C,innerPadding:V,valueScale:S,indexScale:L,enableLabel:le,labelSkipWidth:ue,labelSkipHeight:ce,legends:He,legendLabel:we,totalsOffset:Ge}),$e=Ze.bars,et=Ze.barsWithValue,tt=Ze.xScale,at=Ze.yScale,it=Ze.getLabel,nt=Ze.getTooltipLabel,lt=Ze.getBorderColor,rt=Ze.getLabelColor,ot=Ze.shouldRenderBarLabel,dt=Ze.legendsWithData,ut=Ze.barTotals,st=Ze.getColor,ct=X(),ht=ct.showTooltipFromEvent,ft=ct.hideTooltip,bt=O({annotations:B({data:$e,annotations:ke,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var t=e.width,a=e.height;return{width:t,height:a,size:Math.max(t,a)}}})}),vt=e((function(){return{borderRadius:me,borderWidth:xe,isInteractive:We,isFocusable:!1,labelSkipWidth:ue,labelSkipHeight:ce,margin:_e,width:s,height:f,innerWidth:qe,innerHeight:Je,bars:$e,legendData:dt,enableLabel:le,xScale:tt,yScale:at,tooltip:Be,getTooltipLabel:nt,onClick:Re,onMouseEnter:Oe,onMouseLeave:Te,getColor:st}}),[me,xe,We,ue,ce,_e,s,f,qe,Je,$e,dt,le,tt,at,Be,nt,Re,Oe,Te,st]),gt=v(Ce),mt=fe(g,m,J,$);o((function(){var e,t=null==(e=Ne.current)?void 0:e.getContext("2d");Ne.current&&t&&(Ne.current.width=Qe*Ee,Ne.current.height=Ue*Ee,t.scale(Ee,Ee),t.fillStyle=je.background,t.fillRect(0,0,Qe,Ue),t.translate(_e.left,_e.top),te.forEach((function(e){"grid"===e?"number"==typeof je.grid.line.strokeWidth&&je.grid.line.strokeWidth>0&&(t.lineWidth=je.grid.line.strokeWidth,t.strokeStyle=je.grid.line.stroke,D&&c(t,{width:qe,height:Je,scale:tt,axis:"x",values:K}),G&&c(t,{width:qe,height:Je,scale:at,axis:"y",values:_})):"axes"===e?h(t,{xScale:tt,yScale:at,width:qe,height:Je,top:W,right:M,bottom:H,left:E,theme:je}):"bars"===e?(N(t,je.text),et.forEach((function(e){ie(t,U({bar:e,borderColor:lt(e),borderRadius:me,borderWidth:xe,label:it(e.data),shouldRenderLabel:ot(e),labelStyle:U({},je.labels.text,{fill:rt(e)})},mt(e.width,e.height)))}))):"legends"===e?dt.forEach((function(e){var a=e[0],i=e[1];F(t,U({},a,{data:i,containerWidth:qe,containerHeight:Je,theme:je}))})):"annotations"===e?I(t,{annotations:bt,theme:je}):"totals"===e&&Xe?function(e,t,a,i){void 0===i&&(i=de.layout),N(e,a.labels.text),e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",t.forEach((function(t){j(e,a.labels.text,t.formattedValue,t.x,t.y)}))}(t,ut,je,g):"function"==typeof e&&e(t,vt)})),t.save())}),[H,E,M,W,et,me,xe,bt,D,G,lt,it,rt,K,_,b,f,Je,qe,vt,te,g,dt,_e.left,_e.top,Ue,Qe,Ee,ie,tt,at,m,ot,je,s,ut,Xe,gt,mt]);var pt=a((function(e){if($e&&Ne.current){var a=k(Ne.current,e),i=a[0],n=a[1],l=ze($e,_e,i,n);void 0!==l?(ht(t(Be,U({},l.data,{color:l.color,label:l.label,value:Number(l.data.value)})),e),"mouseenter"===e.type&&(null==Oe||Oe(l.data,e))):ft()}}),[ft,_e,Oe,$e,ht,Be]),xt=a((function(e){if($e&&Ne.current){ft();var t=k(Ne.current,e),a=t[0],i=t[1],n=ze($e,_e,a,i);n&&(null==Te||Te(n.data,e))}}),[ft,_e,Te,$e]),yt=a((function(e){if($e&&Ne.current){var t=k(Ne.current,e),a=t[0],i=t[1],n=ze($e,_e,a,i);void 0!==n&&(null==Re||Re(U({},n.data,{color:n.color}),e))}}),[_e,Re,$e]);return T("canvas",{ref:w(Ne,De),width:Qe*Ee,height:Ue*Ee,style:{width:Qe,height:Ue,cursor:We?"auto":"normal"},onMouseEnter:We?pt:void 0,onMouseMove:We?pt:void 0,onMouseLeave:We?xt:void 0,onClick:We?yt:void 0,role:Fe})},Ae=n((function(e,t){var a=e.isInteractive,i=e.renderWrapper,n=e.theme,l=Z(e,Fe);return T(g,{isInteractive:a,renderWrapper:i,theme:n,animate:!1,children:T(De,U({},l,{forwardedRef:t}))})})),Xe=["defaultWidth","defaultHeight","onResize","debounceResize"],Ye=n((function(e,t){var a=e.defaultWidth,i=e.defaultHeight,n=e.onResize,l=e.debounceResize,r=Z(e,Xe);return T(C,{defaultWidth:a,defaultHeight:i,onResize:n,debounceResize:l,children:function(e){var a=e.width,i=e.height;return T(Ee,U({width:a,height:i},r,{ref:t}))}})})),Ge=["defaultWidth","defaultHeight","onResize","debounceResize"],Ne=n((function(e,t){var a=e.defaultWidth,i=e.defaultHeight,n=e.onResize,l=e.debounceResize,r=Z(e,Ge);return T(C,{defaultWidth:a,defaultHeight:i,onResize:n,debounceResize:l,children:function(e){var a=e.width,i=e.height;return T(Ae,U({width:a,height:i},r,{ref:t}))}})}));export{Ee as Bar,Ae as BarCanvas,ie as BarItem,le as BarTooltip,Te as BarTotals,Ye as ResponsiveBar,Ne as ResponsiveBarCanvas,de as canvasDefaultProps,re as defaultProps,oe as svgDefaultProps};
//# sourceMappingURL=nivo-bar.mjs.map
